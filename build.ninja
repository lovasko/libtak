cflags = -g -fPIC -Isrc -I/usr/include/ctf/ -ansi -pedantic -Wall -Wextra
ldflags = -lkvm -lbsdctf -lmlist

rule compile
 command = clang $cflags -c $in -o $out

rule link
 command = clang -fPIC -o $out -shared $in $ldflags

build obj/open.o: compile src/open.c
build obj/map.o: compile src/map.c
build obj/find.o: compile src/find.c
build obj/size.o: compile src/size.c

build bin/libtak.so: link obj/open.o obj/map.o obj/find.o obj/size.o

